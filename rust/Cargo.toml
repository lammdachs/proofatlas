[package]
name = "proofatlas_rust"
version = "0.1.0"
edition = "2021"
authors = ["ProofAtlas Contributors"]
description = "High-performance theorem proving components for ProofAtlas"

[lib]
name = "proofatlas_rust"
crate-type = ["cdylib", "rlib"]  # Both Python extension and Rust library

[dependencies]
# Python bindings
pyo3 = { version = "0.20", features = ["extension-module"], optional = true }

# Core dependencies
nom = "7"                        # Parser combinators
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
thiserror = "1.0"               # Error handling
indexmap = "2.0"                # Ordered hashmaps
rustc-hash = "1.1"              # Fast hashing

# Optional dependencies for future components
rayon = { version = "1.7", optional = true }      # Parallel processing
dashmap = { version = "5.5", optional = true }    # Concurrent hashmaps
petgraph = { version = "0.6", optional = true }   # Graph algorithms

# Development dependencies
[dev-dependencies]
criterion = "0.5"               # Benchmarking
proptest = "1.0"               # Property-based testing

[features]
default = ["python"]
python = ["pyo3"]              # Python bindings
parallel = ["rayon", "dashmap"] # Parallel saturation loops
graph = ["petgraph"]           # Graph-based proof analysis

# Optimization for release builds
[profile.release]
lto = "fat"
codegen-units = 1
opt-level = 3
strip = true

# Faster development builds
[profile.dev]
opt-level = 1

# Benchmarking profile
[profile.bench]
debug = true