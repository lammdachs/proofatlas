[package]
name = "proofatlas_rust"
version = "0.1.0"
edition = "2021"
authors = ["ProofAtlas Contributors"]
description = "High-performance theorem proving components for ProofAtlas"

[lib]
name = "proofatlas_rust"
crate-type = ["cdylib", "rlib"]  # Both Python extension and Rust library

[dependencies]
# Python bindings
pyo3 = { version = "0.20", features = ["extension-module"], optional = true }
numpy = { version = "0.20", optional = true }  # For zero-copy array transfer to Python

# Core dependencies
nom = "7"                        # Parser combinators (used in parser/tptp.rs)
thiserror = "1.0"               # Error handling (used in core/error.rs)

# Optional but currently used
serde = { version = "1.0", features = ["derive"] }  # Used in core/logic.rs
serde_json = "1.0"              # For JSON serialization (future use)
indexmap = { version = "2.0", features = ["serde"] }  # Used in core/logic.rs for conjecture_indices

# Future dependencies (commented out until needed)
# rustc-hash = "1.1"            # Fast hashing (not used yet)
# rayon = { version = "1.7", optional = true }      # Parallel processing
# dashmap = { version = "5.5", optional = true }    # Concurrent hashmaps
# petgraph = { version = "0.6", optional = true }   # Graph algorithms

# Development dependencies
[dev-dependencies]
# criterion = "0.5"             # Benchmarking (uncomment when needed)
# proptest = "1.0"             # Property-based testing (uncomment when needed)

[features]
default = ["python"]
python = ["pyo3", "numpy"]     # Python bindings with numpy support
# parallel = ["rayon", "dashmap"] # Parallel saturation loops (future)
# graph = ["petgraph"]           # Graph-based proof analysis (future)

# Optimization for release builds
[profile.release]
lto = "fat"
codegen-units = 1
opt-level = 3
strip = true

# Faster development builds
[profile.dev]
opt-level = 1

# Benchmarking profile
[profile.bench]
debug = true